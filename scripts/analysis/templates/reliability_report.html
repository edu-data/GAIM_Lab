<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAIM Lab â€” ì‹ ë¢°ë„ ë¶„ì„ ë¦¬í¬íŠ¸</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>
    <style>
        :root {
            --bg: #0f0f1a;
            --surface: #1a1a2e;
            --card: #16213e;
            --accent: #6c63ff;
            --accent2: #00d2ff;
            --text: #e0e0ec;
            --text-dim: #888;
            --success: #00e676;
            --warning: #ffc107;
            --danger: #ff5252;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        h1 {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            text-align: center;
            color: var(--text-dim);
            margin-bottom: 2rem;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid rgba(108, 99, 255, 0.2);
        }

        .card .value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .card .label {
            color: var(--text-dim);
            font-size: 0.85rem;
            margin-top: 0.3rem;
        }

        .section {
            background: var(--surface);
            border-radius: 14px;
            padding: 1.8rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(108, 99, 255, 0.15);
        }

        .section h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--accent2);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th {
            background: rgba(108, 99, 255, 0.15);
            padding: 0.7rem 0.5rem;
            text-align: center;
            font-weight: 600;
            color: var(--accent2);
            border-bottom: 2px solid rgba(108, 99, 255, 0.3);
        }

        td {
            padding: 0.6rem 0.5rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        tr:hover {
            background: rgba(108, 99, 255, 0.08);
        }

        .badge {
            display: inline-block;
            padding: 0.2rem 0.7rem;
            border-radius: 12px;
            font-size: 0.78rem;
            font-weight: 600;
        }

        .badge.excellent {
            background: rgba(0, 230, 118, 0.15);
            color: var(--success);
        }

        .badge.good {
            background: rgba(255, 193, 7, 0.15);
            color: var(--warning);
        }

        .badge.poor {
            background: rgba(255, 82, 82, 0.15);
            color: var(--danger);
        }

        .chart-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .interpretation {
            background: var(--card);
            border-radius: 10px;
            padding: 1.2rem;
            margin-top: 1rem;
            border-left: 4px solid var(--accent);
            font-size: 0.88rem;
            line-height: 1.6;
        }

        .interpretation h3 {
            color: var(--accent2);
            margin-bottom: 0.5rem;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .footer {
            text-align: center;
            color: var(--text-dim);
            font-size: 0.8rem;
            margin-top: 2rem;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ“Š GAIM Lab ì‹ ë¢°ë„ ë¶„ì„ ë¦¬í¬íŠ¸</h1>
        <p class="subtitle">{{ meta.runs }}íšŒ ë°˜ë³µ Ã— {{ meta.videos }}ê°œ ì˜ìƒ Ã— {{ meta.dimensions }}ì°¨ì› í‰ê°€ ë„êµ¬</p>

        <div class="cards">
            <div class="card">
                <div class="value">{{ "%.4f"|format(ca_mean) }}</div>
                <div class="label">Cronbach's Î± (í‰ê· )</div>
            </div>
            <div class="card">
                <div class="value">{{ "%.4f"|format(retest.mean_r) }}</div>
                <div class="label">ì¬ê²€ì‚¬ ìƒê´€ (Test-Retest r)</div>
            </div>
            <div class="card">
                <div class="value">{{ "%.2f"|format(retest.mean_mad) }}</div>
                <div class="label">í‰ê·  ì ˆëŒ€ì°¨ (MAD, ì )</div>
            </div>
            <div class="card">
                <div class="value">{{ "%.0f"|format(retest.mean_agree_5pt) }}%</div>
                <div class="label">Â±5ì  ì´ë‚´ ì¼ì¹˜ìœ¨</div>
            </div>
        </div>

        <!-- ICC Section -->
        <div class="section">
            <h2>ğŸ“ˆ ICC(2,1) ì°¨ì›ë³„ ê¸‰ë‚´ ìƒê´€ê³„ìˆ˜</h2>
            <div class="chart-container">
                <canvas id="iccChart"></canvas>
            </div>
            <table style="margin-top: 1.2rem;">
                <thead>
                    <tr>
                        <th>ì°¨ì›</th>
                        <th>ë§Œì </th>
                        <th>ICC(2,1)</th>
                        <th>ICC(2,k)</th>
                        <th>SEM</th>
                        <th>CV(%)</th>
                        <th>M Â± SD</th>
                        <th>íŒì •</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in icc_table %}
                    <tr>
                        <td><strong>{{ item.label }}</strong></td>
                        <td>{{ item.max }}</td>
                        <td><strong>{{ "%.4f"|format(item.icc21) }}</strong></td>
                        <td>{{ "%.4f"|format(item.icc2k) }}</td>
                        <td>{{ "%.2f"|format(item.sem) }}</td>
                        <td>{{ item.cv }}</td>
                        <td>{{ "%.1f"|format(item.mean) }} Â± {{ "%.1f"|format(item.std) }}</td>
                        <td><span class="badge {{ item.badge }}">{{ item.verdict }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="interpretation">
                <h3>ğŸ“– í•´ì„ ê¸°ì¤€ (Koo & Li, 2016)</h3>
                ICC &lt; 0.50 = ë¯¸í¡(poor) Â· 0.50â€“0.75 = ì–‘í˜¸(moderate) Â· 0.75â€“0.90 = ìš°ìˆ˜(good) Â· &gt; 0.90 =
                íƒì›”(excellent)<br>
                <em>âš ï¸ AI ì‹œìŠ¤í…œì˜ ê²½ìš°: í‰ìƒì‹œ ë¶„ì„ ê²°ê³¼ê°€ ì¢Œìš° ëŒ€ì¹­ì ì´ë¯€ë¡œ (variance ratioê°€ ì‘ìŒ),
                    ICCê°€ ë‚®ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¬ê²€ì‚¬ ìƒê´€(Test-Retest r)ê³¼ MADë¥¼ ë³‘í–‰ í•´ì„í•˜ì„¸ìš”.</em>
            </div>
        </div>

        <!-- Test-Retest Section -->
        <div class="section">
            <h2>ğŸ”„ ì¬ê²€ì‚¬ ì‹ ë¢°ë„ (Test-Retest Reliability)</h2>
            <div class="cards" style="margin-bottom:1rem">
                <div class="card">
                    <div class="value">{{ "%.4f"|format(retest.mean_r) }}</div>
                    <div class="label">í‰ê·  Pearson r</div>
                </div>
                <div class="card">
                    <div class="value">{{ "%.2f"|format(retest.mean_mad) }}ì </div>
                    <div class="label">í‰ê·  ì ˆëŒ€ì°¨ (MAD)</div>
                </div>
                <div class="card">
                    <div class="value">{{ "%.0f"|format(retest.mean_agree_3pt) }}%</div>
                    <div class="label">Â±3ì  ì´ë‚´ ì¼ì¹˜</div>
                </div>
                <div class="card">
                    <div class="value">{{ "%.0f"|format(retest.mean_agree_5pt) }}%</div>
                    <div class="label">Â±5ì  ì´ë‚´ ì¼ì¹˜</div>
                </div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ì°¨ì›</th>
                        <th>í‰ê·  r</th>
                        <th>ìµœì†Œ r</th>
                        <th>ìµœëŒ€ r</th>
                        <th>MAD</th>
                        <th>íŒì •</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in retest_table %}
                    <tr>
                        <td><strong>{{ item.label }}</strong></td>
                        <td>{{ "%.4f"|format(item.mean_r) }}</td>
                        <td>{{ "%.4f"|format(item.min_r) }}</td>
                        <td>{{ "%.4f"|format(item.max_r) }}</td>
                        <td>{{ "%.2f"|format(item.mean_mad) }}</td>
                        <td><span class="badge {{ item.badge }}">{{ item.verdict }}</span></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="interpretation">
                <h3>ğŸ“– í•´ì„</h3>
                ì¬ê²€ì‚¬ ìƒê´€ r â‰¥ 0.70 = ìš°ìˆ˜ Â· r â‰¥ 0.50 = ì–‘í˜¸ Â· r &lt; 0.50 = ë¯¸í¡<br>
                MAD(í‰ê·  ì ˆëŒ€ì°¨)ëŠ” ë™ì¼ ì˜ìƒì˜ ë°˜ë³µ ë¶„ì„ ì‹œ ì ìˆ˜ ë³€ë™ í­ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
            </div>
        </div>

        <!-- Cronbach's Î± Section -->
        <div class="section">
            <h2>ğŸ”¬ Cronbach's Î± â€” ë‚´ì  í•©ì¹˜ë„</h2>
            <div class="grid-2">
                <div>
                    <table>
                        <thead>
                            <tr>
                                <th>ì‹¤í–‰</th>
                                <th>Î±</th>
                                <th>íŒì •</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in alpha_table %}
                            <tr>
                                <td>{{ item.run_id }}</td>
                                <td><strong>{{ "%.4f"|format(item.alpha) }}</strong></td>
                                <td><span class="badge {{ item.badge }}">{{ item.verdict }}</span></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div>
                    <div class="card" style="margin-bottom:1rem">
                        <div class="value">{{ "%.4f"|format(ca_mean) }}</div>
                        <div class="label">í‰ê·  Cronbach's Î±</div>
                    </div>
                    <div class="card">
                        <div class="value">{{ "%.4f"|format(ca.min) }} ~ {{ "%.4f"|format(ca.max) }}</div>
                        <div class="label">ë²”ìœ„ (min ~ max)</div>
                    </div>
                    <div class="interpretation" style="margin-top:1rem">
                        <h3>ğŸ“– í•´ì„ ê¸°ì¤€</h3>
                        Î± â‰¥ 0.90 = íƒì›” Â· â‰¥ 0.80 = ìš°ìˆ˜ Â· â‰¥ 0.70 = ì–‘í˜¸ Â· &lt; 0.70 = ë¯¸í¡
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            GAIM Lab Reliability Analysis Â· Generated {{ generated_at }}
        </div>
    </div>

    <script>
        new Chart(document.getElementById('iccChart'), {
            type: 'bar',
            data: {
                labels: {{ icc_chart_labels | tojson }},
            datasets: [{
                label: 'ICC(2,1)',
                data: {{ icc_chart_values | tojson }},
            backgroundColor: {{ icc_chart_values | tojson }}.map(v =>
                v >= 0.75 ? 'rgba(0,230,118,0.6)' : v >= 0.50 ? 'rgba(255,193,7,0.6)' : 'rgba(255,82,82,0.6)'
            ),
            borderColor: {{ icc_chart_values | tojson }}.map(v =>
                v >= 0.75 ? '#00e676' : v >= 0.50 ? '#ffc107' : '#ff5252'
            ),
            borderWidth: 2,
            borderRadius: 6,
    }]
  },
            options: {
            responsive: true,
            plugins: {
                legend: { display: false },
                title: { display: false },
            },
            scales: {
                y: {
                    min: 0, max: 1,
                    ticks: { stepSize: 0.25, color: '#888' },
                    grid: { color: 'rgba(255,255,255,0.05)' },
                },
                x: { ticks: { color: '#aaa' }, grid: { display: false } },
            },
        },
});
    </script>
</body>

</html>